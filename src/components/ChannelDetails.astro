---
const { data } = Astro.props;

function formatNumber(n) {
  return new Intl.NumberFormat("en", {
    notation: "compact",
    compactDisplay: "short",
    maximumFractionDigits: 1,
  }).format(n);
}
---

<section class="bg-blue-50 text-black px-4">
  <div class="mx-auto py-16 max-w-5xl">
    <div>
      <h1 class="text-3xl font-bold my-6">{data.title}</h1>

      <img src={data.thumbnail} alt="Profile Image" width="150" class="mb-4" />

      <p><strong>Channel ID:</strong> {data.id}</p>
      <p><strong>Custom URL:</strong> {data.customUrl}</p>
      <p>
        <strong>Published:</strong>
        {new Date(data.publishedAt).toDateString()}
      </p>
      <p>
        <strong>Subscribers:</strong>
        {formatNumber(data.subscriberCount)}
      </p>
      <p><strong>Views:</strong> {formatNumber(data.viewCount)}</p>
      <p><strong>Videos:</strong> {data.videoCount}</p>

      {
        data.bannerExternalUrl && (
          <>
            <h3 class="mt-6 font-semibold">Banner</h3>
            <img src={data.bannerExternalUrl} alt="Banner" width="400" />
          </>
        )
      }

      <h3 class="mt-6 font-semibold">Description</h3>
      <pre style="white-space: pre-wrap;">{data.description}</pre>

      {
        data.topicCategories?.length > 0 && (
          <>
            <h3 class="mt-6 font-semibold">Topic Categories</h3>
            <ul class="list-disc list-inside">
              {data.topicCategories.map((cat) => (
                <li>
                  <a href={cat} target="_blank" rel="noopener">
                    {cat}
                  </a>
                </li>
              ))}
            </ul>
          </>
        )
      }

      <p class="mt-4">
        <strong>Country:</strong>
        {data.country || "N/A"}
      </p>
    </div>
  </div>
</section>
